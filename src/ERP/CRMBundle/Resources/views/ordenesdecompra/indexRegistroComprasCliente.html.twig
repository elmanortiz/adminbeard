{% extends ':Layout:layout2.html.twig' %}

{% block css %}
    {{parent()}}
    <style>
        #lista_clientepotencial_paginate{
            float: left;
        }
        #lista_territorios_previous{
           
            letter-spacing: 0.1em;
            box-sizing: border-box;
            display: inline-block;
            min-width: 1.5em;
            padding: 0.5em 1em;
            margin-left: 2px;
            text-align: center;
            text-decoration: none !important;
        
          
        }
        #lista_territorios_next{
        
            letter-spacing: 0.1em;
            box-sizing: border-box;
            display: inline-block;
            min-width: 1.5em;
            padding: 0.5em 1em;
            margin-left: 2px;
            text-align: center;
            text-decoration: none !important;
       
        }
        
 
        .current{
            border: 1px solid #979797;
            
            
        }
        
        .paginate_button{
            color:#000;
            letter-spacing: 0.1em;
            box-sizing: border-box;
            display: inline-block;
            padding: 0.5em 1em;
            margin-left: 2px;
            text-align: center;
            cursor: pointer;
            border-radius: 2px;
            text-decoration: none !important;
        }
        
        .paginate_button:hover{
             
            background : #c8ced4 !important;
             
        }

    </style>
      <link rel="stylesheet" href="{{ asset('Resources/select2/dist/css/select2.css')}}">
          <link rel="stylesheet" href="{{ asset('Resources/sweetalert-master/dist/sweetalert.css')}}"> 
              <link rel="stylesheet" href="{{asset('Resources/AdminLTE-2.3.0/dist/css/skins/_all-skins.min.css')}}">
              <link rel="stylesheet" href="{{ asset('Resources/js/registroCompras/stylemaquina.css')}}">
{% endblock css%}
{% block js %}
       {{parent()}}
       <script src="{{ asset('Resources/sweetalert-master/dist/sweetalert.min.js') }}"></script>
       <script src="{{ asset('Resources/select2/dist/js/select2.js') }}"></script> 
       <script src="{{ asset('Resources/js/registroCompras/registroCompras.js')}}" ></script>  
       <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
         <script src="{{ asset('Resources/AdminLTE-2.3.0/dist/js/app.js') }}" type="text/javascript"></script>
    
{% endblock %}
{% block descripcion_y_acciones %}

    
 <div class="row">
 {% block descripcion %}
     <div class="col-md-8">
         <input type="hidden" id="idDistribuidor">
         <input type="hidden" id="idDetalleRegistroCompra">
         <p class="robo" style="font-weight: 300; margin-bottom: 0px; font-size: 30px;">Barberias </p>
         <p class="robo" style="font-weight: 300; font-size: 14px; height: 40px;">Ordenes de compras a barberias</p>
     </div>
 {% endblock%}
 {% block acciones %}
     
     	<div class="col-md-4" style="margin-top: 50px;">
                                <!-- Boton Modificacion -->
		
	</div>
     
 {% endblock %}
		
		</div>

{% endblock %}
{% block navegacion_Y_body %}
    	<div class="row">
        {% block navegacion %}
		<hr style="margin-top: 0px !important;">
			<div class="col-md-2" style="border-right: 1px solid #f3f3f3;">
				<!-- Left Navigation -->
				<ul style="list-style: none; padding: 0;">
                                    <a href="{{ path('crm_dashbord') }}" class="leftnava"><li class="leftnav left active ">Menu<span class="pull-right right"></span></li></a>
                                    <a href="{{ path('crm_configuracion') }}" class="leftnava"><li class="leftnav left ">Configuraci&oacute;n</li></a>
                                     <a href="{{ path('crm_reportes') }}" class="leftnava"><li class="leftnav left">Reportes</li></a>
				</ul>
			</div>	
       
            
            
       {% endblock %}

{% block cuerpo %}
    
    <div class="col-md-10" id="contenidoIndexRegistroCompraCliente">
       
     

<div class="row" style="margin-top: 10px; margin-right: 10px; display: none;" id="cont-error1">
                                    <div class="alert alert-danger" role="alert">
                                        <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                                        <span class="sr-only">Error:</span>
                                        <span id="error1"></span>
                                    </div>
</div>
                                <form id="fConsultaFactura">
                                    <div class="form-column col-sm-12" style=" padding: 20px;">
                                        <div class="form-group">
                                            <div class="row" style="margin-right: 2px;">
                                                <div class="col-sm-4"  >
                                                    <label>Ingrese id de cliente:</label>
                                                    <select id="busqueda-cliente" name="" class="form-control input-sm " data-rule-required="true" style=" width: 100%;">
                                                        <option value="0" disabled selected>Seleccione un abogado ...</option>
                                                    </select>

                                                </div>
                                                <div class="col-md-3">
                                                {# Area en donde se selecciona  el abogado que esta solicitando el espacio publicitario #} 
                                                    <div id="estado-registroCompra">
                                                        <label>Estado de registro compra:</label>
                                                        <select name="tipoEstadoE" id="tipoEstadoE" style="width: 100%" class="form-control" required>
                                                            <option value="2">Entregado</option>
                                                            <option value="1">Procesado</option>
                                                            <option value="4">Enviado</option>
                                                            <option value="3">Pendiente/Cancelado</option>
                                                        </select>

                                                    </div>
                                                </div>
                                                <div class="col-sm-4">
                                                    <div class="row">
                                                        <div class="col-sm-12">
                                                            <label>Seleccioone periodo de busqueda:</label>
                                                        </div>
                                                        <div class="col-sm-6"  >
                                                            <input type="text"  name="txtFechaInicio" class="form-control input-sm txtFechaIni" data-rule-required="true"
                                                                   style=" width: 100%;" id="txtFechaInicio"   placeholder="Fecha Registro">
                                                        </div>
                                                        {# <div class="col-sm-6"  >
                                                           <input type="text"  name="txtFechaFin" id="txtFechaFin" class="form-control input-sm txtFechaFin " data-rule-required="true"
                                                                   style=" width: 100%;"   placeholder="Fecha fin">
                                                        </div>#}
                                                    </div>
                                                </div>  
                                                <div class="col-sm-1"  >
                                                    <label style="color: #FFF;">Buscar</label>
                                                    <a class="btn btn-sm btn-info btn-flat pull-left" id="btnbuscar"><i class="fa  fa-search"></i>&nbsp;Buscar</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <br>
                                <div class="clearfix"></div>
                                <div style="margin-top: 30px; margin-left: 5px;">
                                    <table class="listados table table-bordered table-hover">
                                        <thead>
                                            <tr>
                                                <th class="text-center">Id de cliente</th>
                                                <th class="text-center">Fecha de transacción</th>
                                                <th class="text-center">Tipo de servicio</th>
                                                <th class="text-center">Tipo de pago</th>
                                                <th class="text-center">Monto ($)</th>
                                                <th class="text-center">Cantidad de días</th>
                                                {#<th class="text-center">Ubicación</th>#}
                                                <th class="text-center">Acciones</th>
                                            </tr>
                                        </thead>                                       
                                    </table>
                                </div>

    
    
     </div>  
{% endblock %}

       
{% endblock %}
 {% block js_extend %}

  
      <script  type="text/javascript">
          $(document).ready(function(){
                $('#DataTables_Table_0_filter').hide();

var url = Routing.generate('admin_facturacion_data')+"?param1="+$('#busqueda-abogado').val()+"&param2="+$('#busqueda_tiposervicio').val()+"&param3="+$('#txtFechaInicio').val()+"&param4="+$('#txtFechaFin').val();
           
            var table = $('.listados').DataTable({
                    //searching:true,
                    //"order":[[1,"desc"]],
                    "dom": "tp",
                    "processing": false,
                    "serverSide": true,
                    "ajax": {
                        "url": url,
                        {#"url": '{{path('admin_facturacion_data')}}',#}
                        "type": 'GET'
                    },
                    "columns": [
                        { "data": "codigo" },                      
                        { "data": "fecha_pago" },
                        { "data": "servicio" },
                        { "data": "tipo_pago" },
                        { "data": "monto" },
                        { "data": "plazo" },
                        { "data": "link" }
                    ],
                    "columnDefs": [
                           { "orderable": false, "targets": 0 },
                           { "orderable": false, "targets": 2 },
                           { "orderable": false, "targets": 3 },
                           { "orderable": false, "targets": 4 },
                           { "orderable": false, "targets": 5 },
                           { "orderable": false, "targets": 6 }
                          
                          
                           //{ "orderData": [ 2, 3, 4 ], "targets": 2 }
                    ],
                    "language": {
                    "info": "Mostrando página _PAGE_ de _PAGES_",
                    "infoEmpty": "",
                    "emptyTable": "No se encontraron registros",
                    "paginate": {
                        "next": "Siguiente",
                        "previous": "Anterior"
                    },
                    "processing": "Procesando petición...",
                    "search": "Buscar registros:",
                    "lengthMenu": "Mostrar _MENU_ registros"
                },
                   
            });
       
            $(document).on("click", "#btnbuscar", function(){
                var busquedaAbogado = $('#busqueda-abogado').val();
                var busquedaFInicio = $('#txtFechaInicio').val();
                var busquedaFFin = $('#txtFechaFin').val();
                var servicio = $('#busqueda_tiposervicio').val();
               
                var fi = new Date(busquedaFInicio);
                var ff = new Date(busquedaFFin);
               
                if( (fi > ff) || (busquedaFInicio == '' && busquedaFFin =='')){
                    var error1 = document.getElementById('cont-error1');
                    error1.style.display = 'none';
                   
                    url = Routing.generate('admin_facturacion_data')+"?param1="+$('#busqueda-abogado').val()+"&param2="+$('#busqueda_tiposervicio').val()+"&param3="+$('#txtFechaInicio').val()+"&param4="+$('#txtFechaFin').val();
                    table.ajax.url(url).load();
                } else {
                    var error1 = document.getElementById('cont-error1');
                    $('#error1').html('La fecha de fin debe ser mayor a la fecha inicial.');
                    error1.style.display = 'block';
                }
            });

        
     
         
        });
        
      </script>
      
      
  {% endblock %} 




































