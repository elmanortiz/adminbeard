{% extends ':Layout:layout2.html.twig' %}

{% block css %}
    {{parent()}}
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
      <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/material-design-lite/1.1.0/material.min.css">
      <link rel="stylesheet" href="https://cdn.datatables.net/1.10.11/css/dataTables.material.min.css">
       <link rel="stylesheet" href="{{ asset('Resources/select2/dist/css/select2.css')}}">
          <link rel="stylesheet" href="{{ asset('Resources/sweetalert-master/dist/sweetalert.css')}}"> 
{% endblock css%}
{% block js %}
       {{parent()}}
       <script src="{{ asset('Resources/sweetalert-master/dist/sweetalert.min.js') }}"></script>
       <script src="{{ asset('Resources/select2/dist/js/select2.js') }}"></script>   
       <script src="{{ asset('Resources/js/distribuidores/distribuidores.js')}}" ></script>  
       <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
    
    
{% endblock %}
{% block descripcion_y_acciones %}

    
 <div class="row">
 {% block descripcion %}
			<div class="col-md-8">
                            <input type="hidden" id="idDistribuidor">
				<p class="robo" style="font-weight: 300; margin-bottom: 0px; font-size: 30px;">Clientes distribuidores</p>
                                <p class="robo" style="font-weight: 300; font-size: 14px; height: 40px;">Listado de clientes distribuidores</p>
                                   
			</div>
 {% endblock%}
 {% block acciones %}
     
     	<div class="col-md-4" style="margin-top: 50px;">
                                <!-- Boton Modificacion -->
		

                                <!-- Boton Delete -->
                                <div class="btn-group pull-right">
                                    <button class="btn btn-danger btn-sm delete" style="margin-left: 5px;" type="submit" >Delete</button>
                                </div>

                                <!-- Boton Ingreso -->
                                <div class="btn-group pull-right">
                                    <button class="btn btn-primary btn-sm insertar" style="margin-left: 5px;" id="insertar">Nuevo Cliente</button>
                                </div>
                                <div class="btn-group pull-right">
                                    <button class="btn btn-primary btn-sm nuevoRegistroCompra" style="margin-left: 5px;" id="nuevoRC" title="Nuevo Registro de compra">Nuevo registro de venta</button>
                                </div>
                                <div class="btn-group pull-right">
                                    <button class="btn btn-default btn-sm cancelarRC" style="margin-left: 5px;" id="cancelarRC">Cancelar Registro</button>
                                </div>


                                <!-- Botones del ingreso -->


                                <!-- Boton con Dropdown -->
				
			</div>
     
 {% endblock %}
		
		</div>

{% endblock %}
{% block navegacion_Y_body %}
    	<div class="row">
        {% block navegacion %}
            <hr style="margin-top: 0px !important;">
            <div class="col-md-2" style="border-right: 1px solid #f3f3f3;">
                <!-- Left Navigation -->
                <ul style="list-style: none; padding: 0;">
                    <a href="{{ path('ordenesdecompra') }}" class="leftnava"><li class="leftnav left active ">Menu<span class="pull-right right"></span></li></a>
                   
                </ul>
            </div>	
       
            
            
       {% endblock %}

{% block cuerpo %}
    
    <div class="col-md-10" id="contenidoIndexDistribuidores">
        <div id="datadistribuidores">
       
              
     
      
            <table id="lista_cliente" class="mdl-data-table" cellspacing="0" width="100%">
        <thead>
            <tr>
                
                <th>ID Cliente</th>
                <th>Nombre</th>
                <th>Porcentaje</th>
                <th>Credito</th>
             
               
               
                {#<th>Actions</th>#}
            </tr>
        </thead>
        {#<tbody>
        {% for ctlTerritorio in ctlTerritorios %}
            <tr>
                <td><a href="{{ path('ctlterritorio_show', { 'id': ctlTerritorio.id }) }}">{{ ctlTerritorio.id }}</a></td>
                <td>{{ ctlTerritorio.nombre }}</td>
                <td>
                    <ul>
                        <li>
                            <a href="{{ path('ctlterritorio_show', { 'id': ctlTerritorio.id }) }}">show</a>
                        </li>
                        <li>
                            <a href="{{ path('ctlterritorio_edit', { 'id': ctlTerritorio.id }) }}">edit</a>
                        </li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
        </tbody>#}
        
    </table>
    </div>    

        <div class="clearfix"></div>
       

           
             
      <div class="row"  style="margin-top: 10px;">
       
             <div id="contenidoFormularioRegistroCompra">
                 <div class="form-column col-md-3"><div class="form-group" style="margin-right: 2%;" >
                         <label for="nombreCliente" class="control-label">Nombre Cliente</label>
                         <input type="text" class="form-control cle" id="nombreCliente"  name="nombreCliente"  readonly>
                     </div>
                 </div>
                 <div class="form-column col-md-3" style="padding-top: 0%;">
                     <div class="form-group">
                         <label for="fechaRC" class="control-label">Fecha</label></br>
                         <input type="text" name="fechaRC" id="fechaRC"  required class="form-control">

                     </div>
                 </div>
                 <div class="form-column col-md-3"><div class="form-group" style="margin-right: 2%;" >
                           <label for="costo" class="control-label">Estado</label>
                        
                         <select name="tipoEstado" id="tipoEstado" style="width: 100%" class="form-control" required>
                            <option value="1">Pago Recibido</option>
                             <option value="2">En proceso</option>
                               <option value="3">Procesado</option>
                                 <option value="4">En camino</option>
                                   <option value="4">Completado</option>
                         </select>
                     </div>
                 </div>
                  <div class="form-column col-md-3"><div class="form-group" style="margin-right: 2%;" >
                        <label for="tipoEstado" class="control-label">Tipo de pago</label>
                         <select name="tipoPago" id="tipoPago" style="width: 100%" class="form-control" required>
                             <option value="Efectivo">Efectivo</option>
                             <option value="Credito">Credito</option>
                                
                         </select>
                     </div>
                 </div>
                 <div class="clearfix"></div>
                 <div style="margin-bottom: 10px;margin-top: 10px;margin-left: 10px;" class="col-md-2">
                     <img src="{{ asset('Resources/src/img/add.png') }}" title="Nuevo" class="addCompraProducto">
                     <b class="addDatosMantenimiento">Agregar detalle</b><br><br>
                </div>
                <div class="col-md-10"></div>
                
             </div>
                     <div class="form-column col-md-3" id="botonesInsercion">
                       
                             <div class="btn-group">
                                 <a class="btn btn-default  btn-sm " style="margin-left: 0px;margin-top: 35px;" id="cancelarInsercionRC">Cancelar</a>
                             </div>
                             <div class="btn-group">
                                 <button class="btn btn-primary  btn-sm " style="margin-left: 0px;margin-top: 35px;" id="guardarInsercionRC">Guardar</button>
                             </div>                                                                              
                         
                     </div>
                     <div class="col-md-3"></div>
                     <div class="col-md-3"></div>
                     <div class="col-md-3">
                         <div class="btn-group totalRC">
                             <label for="totalRC" class="control-label totalRC" >Total</label>
                             <input type="text" class="form-control cle" id="totalRC"  name="totalRC"  placeholder="$ " readonly>
                         </div>
                     </div>
        </div>
        </div> 
    
    
    
{% endblock %}

        </div>
{% endblock %}
 {% block js_extend %}

    <script src="https://cdn.datatables.net/1.10.11/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.11/js/dataTables.material.min.js "></script>
      <script  type="text/javascript">
          $(document).ready(function(){
var numero_edicion =0;
  $(".cancelarRC").hide();

 $(".delete").hide();
            $('#lista_cliente').DataTable( {
                                    
		              columnDefs: [
		            {
		                targets: [ 0, 1, 2 ],
		                className: 'mdl-data-table__cell--non-numeric'
		            }
		        ],
                                        
                                        
                                        "pageLength": 10,
                                        "lengthMenu": [ 20 ],
                                        "dom": "ftp",
                                        "processing": true,
                                        "serverSide": true,
                                        "ajax": {
                                            "url": '{{path('cliente_distribuidores_data')}}',
                                            "type": 'GET'
                                        },
                                        "columns": [
                                             
                                        { "data":"id" },
                                        { "data":"nombreCompleto" },
                                        {"data":"direccion"},
                                        {"data":"credito"}
                                            
                                             
                              ],
                                            "language": {
                                            "info": "Mostrando página _PAGE_ de _PAGES_",
                                            "infoEmpty": "",
                                            "emptyTable": "No se encontraron registros",
                                            "paginate": {
                                                "next": "Siguiente",
                                                "previous": "Anterior"
                                            },
                                            "processing": "<p>Procesando petición...</p>",
                                            "search": "<p>Buscar registros:</p>",
                                            "lengthMenu": "Mostrar _MENU_ registros"
                                        }

 
		    } );

var idEliminar=0;

  $(document).on("click","tr",function() {
       
       var identificador =     $(this).attr("role");
       
            if(identificador=="row"){
              var idCliente =  $(this).children().html();
            $("tr").css('background-color', 'white');
            $(this).css('background-color', '#E9E6E6');
           

             $(".eliminar").show();   
             $(".nuevoRegistroCompra").show();
             $("#idDistribuidor").val(idCliente);
      
            }
       
         
             
             
           
                
       });
           


         
           
     $(document).on("click",".insertar",function() {
        var url = Routing.generate('nuevocliente');
        window.open(url, "_self");

         
         
         
     });
    
    
        
       
        
        
        
        //Eventos de los CheckBoxs para poder controlar los seleccionados
         
            
            
            
  //Envento del search que hace que se escondan los botones cuando busco algo dentro del filtro
            var table = $('#lista_cliente').DataTable();

            table.on( 'search.dt', function () {
              $(".delete").hide();
              $(".modificar").hide();
              
                } );
                
 // Handle click on "Select all" control
            $('#select_all').on('click', function(){
               
               
                  if( $(this).is(':checked') ) {
                        $(".delete").show();
                        var table = $('#lista_cliente').DataTable();
                        var rows = table.rows({ 'search': 'applied' }).nodes();
                        $('input[type="checkbox"]', rows).prop('checked', this.checked);
                        
                          
                   }else{
                       $(".delete").hide();
                       var table = $('#lista_cliente').DataTable();
                        var rows = table.rows({ 'search': 'applied' }).nodes();
                        $('input[type="checkbox"]', rows).prop('checked', this.checked);
                       
                   }
                   
                   });  
       
 //Eliminar desde la seleccion de los checkboxs

           
           
           
  });
        
        
        

      </script>
      
      
  {% endblock %} 


